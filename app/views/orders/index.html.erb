<div class="container">

   <% if !flash[:notice].blank? %>
   <div class="alert alert-info">
      <%= flash[:notice] %>
   </div>
   <% end %>

   
   <% flash.each do |type, msg| %>
      <div class="alert alert-success alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong><%= msg %></strong>
      </div>
   <% end %>

   <table class="table table-striped table-dark text-center">
      <thead>
         <tr>
            <th class="text-center">Name</th>
            <th class="text-center">Restaurant</th>
            <th class="text-center">Menu</th>
            <th class="text-center">Invited Friends</th>
            <th class="text-center">Joined Friens</th>
            <th class="text-center">Status</th>
            <th class="text-center">Action</th>
         </tr>
      </thead>
      <tbody>

         <% @user_orders.each do |order| %>
         <tr>
            <td><%= order.name %></td>
            <td><%= order.restaurant %></td>
            <td><%= order.menu %></td>
            <td><%= order.invites.where(joined: false).count %></td>
            <td><%= order.invites.where(joined: true).count %></td>
            <td><%= order.status %></td>
            <td>
               <% if order.status == "waiting" %>
               <%= link_to 'finish', order_path(id:order.id , link:"finish") , method: :patch%>
               <%= link_to 'cancel', order_path(id:order.id , link:"cancel") , method: :patch%>
               <% end %>
               <%= link_to 'view', order , method: :get%>
            </td>
         </tr>
         <% end %>

         <% @user_invited_orders.each do |order| %>
         <tr>
            <td><%= order.name %></td>
            <td><%= order.restaurant %></td>
            <td><%= order.menu %></td>
            <td><%= order.invites.where(joined: false).count %></td>
            <td><%= order.invites.where(joined: true).count %></td>
            <td><%= order.status %></td>
            <td>
               <%= link_to 'view', order , method: :get%>
            </td>
         </tr>
         <% end %>
      </tbody>
   </table>
</div>